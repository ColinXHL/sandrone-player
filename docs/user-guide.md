# AkashaNavigator 用户指南

AkashaNavigator 是一款 Windows 悬浮网页播放器，专为游戏时观看攻略视频设计。

## 目录

- [安装与启动](#安装与启动)
- [基本操作](#基本操作)
- [快捷键](#快捷键)
- [插件管理](#插件管理)
- [Profile 配置](#profile-配置)
- [归档管理](#归档管理)
- [常见问题](#常见问题)

---

## 安装与启动

### 系统要求

- Windows 10/11 64 位
- [.NET 8 运行时](https://dotnet.microsoft.com/zh-cn/download/dotnet/latest/runtime)
- [WebView2 Runtime](https://developer.microsoft.com/en-us/microsoft-edge/webview2/)（Windows 10/11 通常已预装）

### 安装步骤

1. 从 [GitHub Releases](https://github.com/ColinXHL/akasha-navigator/releases) 下载最新版本
2. 解压到任意目录
3. 以管理员身份运行 `AkashaNavigator.exe`

> ⚠️ **为什么需要管理员权限？**
> 游戏通常以管理员权限运行，软件需要相同权限才能在游戏中使用全局快捷键。

### 数据存储

所有数据存储在程序目录的 `User/` 文件夹中：

```
AkashaNavigator/
├── AkashaNavigator.exe
└── User/
    ├── Data/           # 历史记录、收藏夹
    ├── Profiles/       # Profile 配置
    ├── Plugins/        # 插件
    └── WebView2/       # 浏览器数据（Cookie 等）
```

---

## 基本操作

### 播放器窗口

- **拖动窗口**：按住窗口边缘拖动
- **调整大小**：拖动窗口四角或边缘
- **边缘吸附**：窗口靠近屏幕边缘时自动吸附

### 控制栏

将鼠标移动到屏幕顶部，控制栏会自动显示：

- **地址栏**：输入网址或搜索
- **导航按钮**：后退、前进、刷新
- **收藏按钮**：收藏当前页面
- **菜单按钮**：打开设置、历史记录等

### 透明度调节

- 使用快捷键 `7` / `8` 调节透明度（20% - 100%）
- 或在设置中调整

### 鼠标穿透模式

按 `0` 键切换鼠标穿透模式：

- **开启**：鼠标点击会穿透播放器，直接操作下方的游戏
- **关闭**：正常与播放器交互

---

## 快捷键

### 默认快捷键

| 按键 | 功能 |
|------|------|
| `` ` `` | 播放 / 暂停 |
| `5` | 后退 5 秒 |
| `6` | 前进 5 秒 |
| `7` | 降低透明度 |
| `8` | 增加透明度 |
| `0` | 切换鼠标穿透 |

### 自定义快捷键

1. 打开设置窗口
2. 选择「快捷键」选项卡
3. 点击要修改的快捷键，按下新的按键组合
4. 支持组合键：Ctrl、Alt、Shift + 任意键

---

## 插件管理

### 安装插件

1. 打开「插件中心」（菜单 → 插件中心）
2. 切换到「可用插件」选项卡
3. 点击「安装」按钮

### 启用/禁用插件

1. 在「已安装」选项卡中找到插件
2. 点击开关切换启用状态

### 插件设置

部分插件提供可配置选项：

1. 点击插件卡片上的「设置」按钮
2. 调整配置后自动保存

### 手动安装插件

将插件文件夹放入 `User/Plugins/` 目录，重启应用即可。

---

## Profile 配置

Profile 是针对特定游戏的配置方案，包含窗口位置、快捷键、插件等设置。

### 切换 Profile

1. 点击控制栏的 Profile 按钮
2. 选择目标 Profile

### 创建 Profile

1. 打开「插件中心」→「Profile」选项卡
2. 点击「创建 Profile」
3. 填写名称和描述
4. 选择要关联的插件

### 从市场安装 Profile

1. 打开「插件中心」→「Profile」选项卡
2. 浏览可用的 Profile
3. 点击「安装」

---

## 归档管理

归档功能允许你保存和组织重要的网页内容，使用树形结构管理，支持文件夹分类。

### 创建归档

1. 在控制栏点击「归档」按钮
2. 输入归档标题和 URL
3. 选择目标文件夹（可选）
4. 点击「确定」保存

### 管理归档

打开归档窗口（菜单 → 归档管理）：

- **新建文件夹**：点击「新建目录」按钮创建文件夹
- **搜索归档**：在搜索框输入关键词，支持标题和 URL 搜索
- **排序**：点击排序按钮切换时间排序（最新/最早）
- **打开归档**：双击归档项打开对应网页

### 编辑和移动

右键点击归档项或文件夹：

- **编辑**：修改标题和 URL
- **移动到...**：将归档项移动到其他文件夹
- **删除**：删除归档项或文件夹（删除文件夹会同时删除其中所有内容）
- **新建子目录**：在文件夹下创建子文件夹

### 数据存储

归档数据存储在当前 Profile 的 `archives.json` 文件中，切换 Profile 会显示对应的归档内容。

---

## 常见问题

### Q: 快捷键在游戏中不起作用？

确保以管理员身份运行 AkashaNavigator。

### Q: 视频无法播放？

1. 检查网络连接
2. 尝试刷新页面
3. 确保 WebView2 Runtime 已安装

### Q: 如何保持 B 站登录状态？

AkashaNavigator 会自动保存 Cookie，正常登录后下次启动会保持登录状态。

### Q: 窗口位置没有保存？

窗口位置会在关闭时自动保存。如果异常退出可能导致位置丢失。

### Q: 插件不工作？

1. 检查插件是否已启用
2. 检查插件所需权限是否已授予
3. 查看日志窗口（菜单 → 日志）排查错误

---

## 相关文档

- [插件开发指南](plugin-development.md)
- [插件 API 参考](api/README.md)
- [Profile 创建指南](profile-guide.md)

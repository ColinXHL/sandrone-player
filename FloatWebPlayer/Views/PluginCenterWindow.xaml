<helpers:AnimatedWindow x:Class="FloatWebPlayer.Views.PluginCenterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:helpers="clr-namespace:FloatWebPlayer.Helpers"
        xmlns:local="clr-namespace:FloatWebPlayer.Views"
        Title="æ’ä»¶ä¸­å¿ƒ"
        Width="900"
        Height="650"
        WindowStartupLocation="CenterScreen"
        Foreground="White"
        ResizeMode="CanResize"
        MinWidth="700"
        MinHeight="500">
    
    <helpers:AnimatedWindow.Resources>
        <!-- å¯¼èˆªæŒ‰é’®æ ·å¼ -->
        <Style x:Key="NavButtonStyle" TargetType="RadioButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#AAA"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}" CornerRadius="4" Margin="4,2">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Foreground" Value="White"/>
                                <Setter TargetName="border" Property="Background" Value="#333"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="#CCC"/>
                                <Setter Property="Cursor" Value="Hand"/>
                                <Setter TargetName="border" Property="Background" Value="#2A2A2A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- åˆ†éš”çº¿æ ·å¼ -->
        <Style x:Key="NavSeparatorStyle" TargetType="Border">
            <Setter Property="Height" Value="1"/>
            <Setter Property="Background" Value="#333"/>
            <Setter Property="Margin" Value="12,8"/>
        </Style>

        <!-- å…³é—­æŒ‰é’®æ ·å¼ -->
        <Style x:Key="CloseButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#888"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}" CornerRadius="0,8,0,0">
                            <TextBlock Text="âœ•" FontSize="14" Foreground="{TemplateBinding Foreground}"
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#C42B1C"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="Cursor" Value="Hand"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- æ·±è‰²æ»šåŠ¨æ¡æ ·å¼ -->
        <Style x:Key="DarkScrollBarThumb" TargetType="Thumb">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border Background="#555" CornerRadius="3" Margin="2"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DarkScrollBar" TargetType="ScrollBar">
            <Setter Property="Width" Value="8"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid>
                            <Border Background="#2A2A2A" CornerRadius="4"/>
                            <Track x:Name="PART_Track" IsDirectionReversed="True">
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource DarkScrollBarThumb}"/>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DarkScrollViewer" TargetType="ScrollViewer">
            <Setter Property="Cursor" Value="Arrow"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <ScrollContentPresenter Grid.Column="0"/>
                            <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="1"
                                       Style="{StaticResource DarkScrollBar}"
                                       Value="{TemplateBinding VerticalOffset}"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </helpers:AnimatedWindow.Resources>

    <!-- ä¸»å®¹å™¨å¸¦è¾¹æ¡† -->
    <Border x:Name="MainContainer" Background="#1E1E1E" BorderBrush="#333" BorderThickness="1" CornerRadius="8"
            RenderTransformOrigin="0.5,0.5" Opacity="0">
        <Border.RenderTransform>
            <ScaleTransform x:Name="ContainerScale" ScaleX="0.96" ScaleY="0.96"/>
        </Border.RenderTransform>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- æ ‡é¢˜æ  -->
            <Border Grid.Row="0" Background="#252525" CornerRadius="8,8,0,0" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="ðŸ”Œ æ’ä»¶ä¸­å¿ƒ" FontSize="14" FontWeight="SemiBold" 
                               Foreground="#EEE" VerticalAlignment="Center" Margin="16,0"/>
                    <Button Style="{StaticResource CloseButtonStyle}"
                            HorizontalAlignment="Right" VerticalAlignment="Top"
                            Click="BtnClose_Click"/>
                </Grid>
            </Border>

            <!-- ä¸»å†…å®¹åŒº -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="180"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- å·¦ä¾§å¯¼èˆªæ  -->
                <Border Grid.Column="0" Background="#252525" CornerRadius="0,0,0,8">
                    <StackPanel Margin="8,16,8,16">
                        <!-- æ’ä»¶ç®¡ç†åˆ†ç»„ -->
                        <TextBlock Text="æ’ä»¶ç®¡ç†" Foreground="#666" FontSize="11" FontWeight="SemiBold"
                                   Margin="12,0,0,8"/>
                        <RadioButton x:Name="NavInstalledPlugins" Content="ðŸ“¦ å·²å®‰è£…æ’ä»¶" 
                                     Style="{StaticResource NavButtonStyle}"
                                     IsChecked="True"
                                     Checked="NavButton_Checked"/>
                        <RadioButton x:Name="NavAvailablePlugins" Content="ðŸ” å¯ç”¨æ’ä»¶" 
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavButton_Checked"/>

                        <Border Style="{StaticResource NavSeparatorStyle}"/>

                        <!-- Profile ç®¡ç†åˆ†ç»„ -->
                        <TextBlock Text="Profile ç®¡ç†" Foreground="#666" FontSize="11" FontWeight="SemiBold"
                                   Margin="12,0,0,8"/>
                        <RadioButton x:Name="NavMyProfiles" Content="ðŸ“‹ æˆ‘çš„ Profile" 
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavButton_Checked"/>
                        <RadioButton x:Name="NavProfileMarket" Content="ðŸ›’ Profile å¸‚åœº" 
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavButton_Checked"/>
                    </StackPanel>
                </Border>

                <!-- å³ä¾§å†…å®¹åŒº -->
                <Border Grid.Column="1" Background="#1E1E1E" CornerRadius="0,0,8,0">
                    <Grid x:Name="ContentArea" Margin="24">
                        <!-- å·²å®‰è£…æ’ä»¶é¡µé¢ -->
                        <local:InstalledPluginsPage x:Name="InstalledPluginsPage" Visibility="Visible"/>
                        
                        <!-- å¯ç”¨æ’ä»¶é¡µé¢ -->
                        <local:AvailablePluginsPage x:Name="AvailablePluginsPage" Visibility="Collapsed"/>
                        
                        <!-- æˆ‘çš„ Profile é¡µé¢å ä½ -->
                        <StackPanel x:Name="MyProfilesPlaceholder" Visibility="Collapsed">
                            <TextBlock Text="æˆ‘çš„ Profile" FontSize="18" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,16"/>
                            <TextBlock Text="æ­¤åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­..." Foreground="#888" FontSize="13"/>
                        </StackPanel>
                        
                        <!-- Profile å¸‚åœºé¡µé¢å ä½ -->
                        <StackPanel x:Name="ProfileMarketPlaceholder" Visibility="Collapsed">
                            <TextBlock Text="Profile å¸‚åœº" FontSize="18" FontWeight="SemiBold" Foreground="White" Margin="0,0,0,16"/>
                            <TextBlock Text="æ­¤åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­..." Foreground="#888" FontSize="13"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</helpers:AnimatedWindow>
